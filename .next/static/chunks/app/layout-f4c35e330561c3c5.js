(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{331:function(e,t,r){Promise.resolve().then(r.t.bind(r,2778,23)),Promise.resolve().then(r.bind(r,2032)),Promise.resolve().then(r.bind(r,7075)),Promise.resolve().then(r.bind(r,1245))},2032:function(e,t,r){"use strict";r.d(t,{default:function(){return s}});var a=r(7437),n=r(1245),o=r(9376);function s(){let{currentUser:e,logout:t}=(0,n.a)(),r=(0,o.useRouter)(),s=async()=>{try{await t(),r.push("/login")}catch(e){console.error("Logout failed:",e)}};return(0,a.jsx)("div",{children:e?(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{style:{fontWeight:600,fontSize:"1.1em",marginRight:"1em"},children:e.email||"User"}),(0,a.jsx)("button",{className:"btn",onClick:s,children:"Logout"})]}):(0,a.jsx)("button",{className:"btn",onClick:()=>r.push("/login"),children:"Login"})})}},7075:function(e,t,r){"use strict";r.d(t,{Toaster:function(){return x}});var a=r(7437),n=r(2265),o=r(5780),s=r(535),i=r(2489),l=r(3448);let u=o.zt,d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(o.l_,{ref:t,className:(0,l.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...n})});d.displayName=o.l_.displayName;let c=(0,s.j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),f=n.forwardRef((e,t)=>{let{className:r,variant:n,...s}=e;return(0,a.jsx)(o.fC,{ref:t,className:(0,l.cn)(c({variant:n}),r),...s})});f.displayName=o.fC.displayName,n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(o.aU,{ref:t,className:(0,l.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r),...n})}).displayName=o.aU.displayName;let p=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(o.x8,{ref:t,className:(0,l.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":"",...n,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});p.displayName=o.x8.displayName;let m=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(o.Dx,{ref:t,className:(0,l.cn)("text-sm font-semibold",r),...n})});m.displayName=o.Dx.displayName;let v=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(o.dk,{ref:t,className:(0,l.cn)("text-sm opacity-90",r),...n})});v.displayName=o.dk.displayName;var g=r(3340);function x(){let{toasts:e}=(0,g.p)();return(0,a.jsxs)(u,{children:[e.map(e=>{let{id:t,title:r,description:n,action:o,variant:s}=e;return(0,a.jsxs)(f,{variant:s,children:[(0,a.jsxs)("div",{className:"grid gap-1",children:[r&&(0,a.jsx)(m,{children:r}),n&&(0,a.jsx)(v,{children:n})]}),o,(0,a.jsx)(p,{})]},t)}),(0,a.jsx)(d,{})]})}},1245:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return d},a:function(){return c}});var a=r(7437),n=r(2265),o=r(6410),s=r(3301),i=r(5978),l=r(3340);let u=(0,n.createContext)({currentUser:null,loading:!0,logout:async()=>{}});function d(e){let{children:t}=e,[r,d]=(0,n.useState)(null),[c,f]=(0,n.useState)(!0),{toast:p}=(0,l.p)();(0,n.useEffect)(()=>{let e=(0,s.Aj)(o.I,async e=>{if(console.log("[AuthContext] onAuthStateChanged:",e),e){var t,r;let a=(0,i.JU)(o.db,"users",e.uid),n=await (0,i.QT)(a),s=n.exists()?n.data():null;console.log("[AuthContext] Firestore userDoc:",s),d({uid:e.uid,email:e.email||(null==s?void 0:s.email)||null,role:null!==(t=null==s?void 0:s.role)&&void 0!==t?t:"viewer"}),console.log("[AuthContext] setCurrentUser:",{uid:e.uid,email:e.email||(null==s?void 0:s.email)||null,role:null!==(r=null==s?void 0:s.role)&&void 0!==r?r:"viewer"})}else d(null),console.log("[AuthContext] setCurrentUser: null");f(!1),console.log("[AuthContext] setLoading: false")});return()=>e()},[]);let m=async()=>{try{await (0,s.w7)(o.I),d(null),p({title:"Success",description:"Logged out successfully."})}catch(e){throw console.error("Logout error:",e),p({title:"Error",description:"Failed to log out.",variant:"destructive"}),e}};return(0,a.jsx)(u.Provider,{value:{currentUser:r,loading:c,logout:m},children:t})}function c(){return(0,n.useContext)(u)}},3340:function(e,t,r){"use strict";r.d(t,{p:function(){return o}});var a=r(2265);(0,r(535).j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}});let n=0;function o(){let[e,t]=(0,a.useState)([]);return{toast:(0,a.useCallback)(e=>{let{variant:r,title:a,description:o,action:s,...i}=e,l=(n++).toString();return t(e=>[...e,{id:l,variant:r,title:a,description:o,action:s,...i}]),l},[]),dismiss:(0,a.useCallback)(e=>{t(t=>t.filter(t=>t.id!==e))},[]),update:(0,a.useCallback)((e,r)=>{let{variant:a,title:n,description:o,action:s,...i}=r;t(t=>t.map(t=>t.id===e?{...t,variant:a,title:n,description:o,action:s,...i}:t))},[]),toasts:e}}},6410:function(e,t,r){"use strict";r.d(t,{I:function(){return l},db:function(){return u}});var a=r(738),n=r(3301),o=r(5978),s=r(62);let i=(0,a.ZF)({apiKey:"AIzaSyDBgH3vn2ec1FwRRkVIG5gAR9Jkno5VCR4",authDomain:"maintenance-flow-1c30c.firebaseapp.com",projectId:"maintenance-flow-1c30c",storageBucket:"maintenance-flow-1c30c.appspot.com",messagingSenderId:"116876204407",appId:"1:116876204407:web:7641e3dbb7a48cd69c6972"}),l=(0,n.v0)(i),u=(0,o.ad)(i);(0,s.cF)(i)},3448:function(e,t,r){"use strict";r.d(t,{cn:function(){return o}});var a=r(1994),n=r(3335);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}},2778:function(){}},function(e){e.O(0,[461,358,728,812,896,971,117,744],function(){return e(e.s=331)}),_N_E=e.O()}]);