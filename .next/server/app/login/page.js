(()=>{var e={};e.id=626,e.ids=[626],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4770:e=>{"use strict";e.exports=require("crypto")},665:e=>{"use strict";e.exports=require("dns")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},5816:e=>{"use strict";e.exports=require("process")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},6093:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),r(974),r(4845),r(5866);var s=r(3191),i=r(8716),a=r(7922),o=r.n(a),n=r(5231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let d=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,974)),"F:\\Sooraj\\Project Task\\BACK up\\Final working model\\06-07-2025\\dc\\src\\app\\login\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,4845)),"F:\\Sooraj\\Project Task\\BACK up\\Final working model\\06-07-2025\\dc\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["F:\\Sooraj\\Project Task\\BACK up\\Final working model\\06-07-2025\\dc\\src\\app\\login\\page.tsx"],u="/login/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1313:(e,t,r)=>{Promise.resolve().then(r.bind(r,4146))},4146:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(326),i=r(7577),a=r(5047),o=r(6951),n=r(76),l=r(445),d=r(4097),c=r(1190),u=r(1664),p=r(486),m=r(2585);function g(){let[e,t]=(0,i.useState)("sooshee9@gmail.com"),[r,g]=(0,i.useState)("123456789"),[x,h]=(0,i.useState)(!1),[b,f]=(0,i.useState)([]),[P,k]=(0,i.useState)(null),{toast:j}=(0,d.p)(),y=(0,a.useRouter)(),v=async t=>{t.preventDefault(),h(!0),j({title:"Login Attempt",description:"Attempting to log in..."}),console.log("[LoginPage] Login attempt for",e);try{let t=(await (0,o.e5)(l.I,e,r)).user.uid;console.log("[LoginPage] Firebase login success, uid:",t);let s=(0,n.JU)(l.db,"users",t),i=await (0,n.QT)(s),a="user";if(i.exists()){let e=i.data();console.log("[LoginPage] Firestore userDoc:",e),a="admin"===e.role?"admin":"user"}else console.warn("[LoginPage] User profile not found in Firestore, defaulting to user role."),j({title:"Warning",description:"User profile not found. Defaulting to user role.",variant:"default"});k(a);let d=(0,n.hJ)(l.db,"complaints"),c="admin"===a?d:(0,n.IO)(d,(0,n.ar)("createdBy","==",e)),u=(await (0,n.PL)(c)).docs.map(e=>{let t=e.data(),r=["Open","In Progress","Closed","Pending Parts"].includes(t.complaintStatus)?t.complaintStatus:"Open";return{complaintId:t.complaintId||e.id,department:t.department||"",materialsUsed:t.materialsUsed||[],history:t.history||[],id:e.id,userId:t.userId||"",complaintDate:t.complaintDate||"",machineName:t.machineName||"",complaintDescription:t.complaintDescription||"",priority:t.priority||"Low",complaintStatus:r,actionDate:t.actionDate||null,maintenanceRemarks:t.maintenanceRemarks||null,initialInspectionDate:t.initialInspectionDate||null,estimatedEndDate:t.estimatedEndDate||null,finalizationDate:t.finalizationDate||null,createdBy:t.createdBy||"",assignedTo:t.assignedTo||"Person A"}});f(u),console.log("[LoginPage] Complaints fetched:",u),j({title:"Success",description:`Logged in as ${a}. Found ${u.length} complaints.`}),y.push("/")}catch(t){let e="Failed to log in. Please try again.";if(console.error("[LoginPage] Login error:",t),t instanceof m.ZR)switch(t.code){case"auth/invalid-credential":e="Invalid email or password.";break;case"auth/user-disabled":e="This account has been disabled.";break;case"auth/too-many-requests":e="Too many attempts. Please try again later.";break;case"auth/network-request-failed":e="Network error. Please check your connection.";break;case"permission-denied":e="Permission denied. Check Firestore rules or user data.";break;default:e=`Error: ${t.message}`}j({title:"Error",description:e,variant:"destructive"})}finally{h(!1)}};return(0,s.jsxs)("div",{className:"container mx-auto p-4 max-w-md",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Login"}),(0,s.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium",children:"Email"}),s.jsx(c.I,{id:"email",type:"email",value:e,onChange:e=>t(e.target.value),placeholder:"Enter your email",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium",children:"Password"}),s.jsx(c.I,{id:"password",type:"password",value:r,onChange:e=>g(e.target.value),placeholder:"Enter your password",required:!0})]}),s.jsx(u.z,{type:"submit",disabled:x,className:"w-full",children:x?"Logging in...":"Login"})]}),(0,s.jsxs)("div",{className:"mt-8",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Complaints"}),b.length>0?s.jsx(p.m,{initialComplaints:b}):s.jsx("p",{children:'No complaints found. Click "New Complaint" after logging in to create one.'}),P&&(0,s.jsxs)("p",{className:"mt-4",children:["Logged in as: ",P]})]}),s.jsx(u.z,{className:"mt-4",onClick:()=>j({title:"Test",description:"This is a test toast"}),children:"Test Toast"})]})}},1190:(e,t,r)=>{"use strict";r.d(t,{I:()=>o});var s=r(326),i=r(7577),a=r(1223);let o=i.forwardRef(({className:e,...t},r)=>s.jsx("input",{ref:r,className:(0,a.cn)("block w-full rounded-lg border border-blue-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 px-4 py-2 text-base text-blue-900 dark:text-blue-200 placeholder:text-blue-400 dark:placeholder:text-zinc-500 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-150 shadow-sm","hover:border-pink-400 dark:hover:border-pink-400",e),...t}));o.displayName="Input"},974:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`F:\Sooraj\Project Task\BACK up\Final working model\06-07-2025\dc\src\app\login\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[869,152,823,447,486],()=>r(6093));module.exports=s})();